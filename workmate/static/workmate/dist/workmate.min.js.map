{"version":3,"sources":["workmate.js"],"names":["workmate","$","undefined","$ajaxMessages","$contactCall","$dropdown","$menuModal","$messageClose","fn","api","settings","contact_list","contact_search","contact_schema","contact_detail","contact_call","tag_list","tag_schema","tag_detail","dropdown","modal","document","on","this","closest","transition","action","method","urlData","id","data","beforeSend","type","beforeXHR","xhr","setRequestHeader","getCookie","onSuccess","response","$module","status","createMessage","message","onError","errorMessage","responseJSON","messageText","append","name","cookieValue","cookie","cookies","split","i","length","jQuery","trim","substring","decodeURIComponent","window"],"mappings":"CAAC,SAAUA,EAAUC,EAAGC,GAEpB,GACIC,GAAgBF,EAAE,gBAClBG,EAAe,+BACfC,EAAYJ,EAAE,aACdK,EAAaL,EAAE,YACfM,EAAgB,iBAGpBN,GAAEO,GAAGC,IAAIC,SACJD,KACGE,aAAsB,mBACtBC,eAAsB,iCACtBC,eAAsB,0BACtBC,eAAsB,wBACtBC,aAAsB,uBACtBC,SAAsB,eACtBC,WAAsB,sBACtBC,WAAsB,qBAI9Bb,EACKc,aAILb,EACKc,MAAM,gBAAiB,qBAE5Bd,EACKc,MAAM,gBAAiB,kBAAmB,QAG/CnB,EAAEoB,UACGC,GAAG,QAASf,EAAe,WACxBN,EAAEsB,MACGC,QAAQ,YACRC,WAAW,UAKxBxB,EAAEoB,UACGC,GAAG,QAASlB,EAAc,WACvBH,EAAEsB,MACGd,KACGiB,OAAe,eACfC,OAAe,OACfL,GAAe,MACfM,SACIC,GAAI5B,EAAEsB,MAAMO,KAAK,OAErBC,WAAY,SAASrB,GAEjB,MADAA,GAASoB,KAAKE,KAAO/B,EAAEsB,MAAMO,KAAK,QAC3BpB,GAEXuB,UAAW,SAASC,GAChBA,EAAIC,iBAAkB,cAAenC,EAASoC,UAAU,eAE5DC,UAAW,SAASC,EAAUC,EAASL,GAC/BI,EAASE,QACTxC,EAASyC,cAAcH,EAASE,OAAQF,EAASI,UAGzDC,QAAS,SAASC,EAAcL,EAASL,GACjCA,EAAIW,aAAaL,QACjBxC,EAASyC,cAAcP,EAAIW,aAAaL,OAAQN,EAAIW,aAAaH,cAQzF1C,EAASyC,cAAgB,SAASD,EAAQM,GACtC,GAAIJ,GAAUzC,EAAE,kBAAoBuC,EAAS,6CAC7CE,GAAQK,OAAO,kCAAoCP,EAAS,UAC5DE,EAAQK,OAAO,MAAQD,EAAc,QACrC3C,EAAc4C,OAAOL,IAGzB1C,EAASoC,UAAY,SAAUY,GAC3B,GAAIC,GAAc,IAClB,IAAI5B,SAAS6B,QAA6B,IAAnB7B,SAAS6B,OAE5B,IAAK,GADDC,GAAU9B,SAAS6B,OAAOE,MAAM,KAC3BC,EAAI,EAAGA,EAAIF,EAAQG,OAAQD,IAAK,CACrC,GAAIH,GAASK,OAAOC,KAAKL,EAAQE,GACjC,IAAIH,EAAOO,UAAU,EAAGT,EAAKM,OAAS,IAAON,EAAO,IAAM,CACtDC,EAAcS,mBAAmBR,EAAOO,UAAUT,EAAKM,OAAS,GAChE,QAIZ,MAAOL,KAGbU,OAAO3D,SAAW2D,OAAO3D,aAAgBuD","file":"workmate.min.js","sourcesContent":["(function( workmate, $, undefined ) {\n\n    var\n        $ajaxMessages = $('.wm-messages'),\n        $contactCall = '[data-action=\"contact_call\"]',\n        $dropdown = $('.dropdown'),\n        $menuModal = $('.wm-menu'),\n        $messageClose = '.message .close'\n    ;\n\n    $.fn.api.settings\n        .api = {\n            contact_list        : '/api/v1/contact/',\n            contact_search      : '/api/v1/contact/?query={query}',\n            contact_schema      : '/api/v1/contact/schema/',\n            contact_detail      : '/api/v1/contact/{id}/',\n            contact_call        : '/contacts/{id}/call/',\n            tag_list            : '/api/v1/tag/',\n            tag_schema          : '/api/v1/tag/schema/',\n            tag_detail          : '/api/v1/tag/{id}/'\n        }\n    ;\n\n    $dropdown\n        .dropdown({\n        })\n    ;\n\n    $menuModal\n        .modal('attach events', '.grid.launch.item')\n    ;\n    $menuModal\n        .modal('attach events', '.wm-menu .close', 'hide')\n    ;\n\n    $(document)\n        .on('click', $messageClose, function() {\n            $(this)\n                .closest('.message')\n                .transition('fade')\n            ;\n        })\n    ;\n\n    $(document)\n        .on('click', $contactCall, function() {\n            $(this)\n                .api({\n                    action       : 'contact_call',\n                    method       : 'POST',\n                    on           : 'now',\n                    urlData: {\n                        id: $(this).data('id')\n                    },\n                    beforeSend: function(settings) {\n                        settings.data.type = $(this).data('type');\n                        return settings;\n                    },\n                    beforeXHR: function(xhr) {\n                        xhr.setRequestHeader (\"X-CSRFToken\", workmate.getCookie('csrftoken'));\n                    },\n                    onSuccess: function(response, $module, xhr) {\n                        if (response.status) {\n                            workmate.createMessage(response.status, response.message);\n                        }\n                    },\n                    onError: function(errorMessage, $module, xhr) {\n                        if (xhr.responseJSON.status) {\n                            workmate.createMessage(xhr.responseJSON.status, xhr.responseJSON.message);\n                        }\n                    }\n                })\n            ;\n        })\n    ;\n\n    workmate.createMessage = function(status, messageText) {\n        var message = $('<div class=\"ui ' + status + ' message\"><i class=\"close icon\"></i></div>');\n        message.append('<div class=\"header capitalize\">' + status + '</div>');\n        message.append('<p>' + messageText + '</p>');\n        $ajaxMessages.append(message);\n    };\n\n    workmate.getCookie = function (name) {\n        var cookieValue = null;\n        if (document.cookie && document.cookie != '') {\n            var cookies = document.cookie.split(';');\n            for (var i = 0; i < cookies.length; i++) {\n                var cookie = jQuery.trim(cookies[i]);\n                if (cookie.substring(0, name.length + 1) == (name + '=')) {\n                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                    break;\n                }\n            }\n        }\n        return cookieValue;\n    };\n\n}(window.workmate = window.workmate || {}, jQuery));"],"sourceRoot":"/source/"}