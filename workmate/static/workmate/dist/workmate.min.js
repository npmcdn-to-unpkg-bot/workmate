!function(t,e,a){var c=e(".wm-messages"),n=e(".ui.checkbox"),o='[data-action="contact_call"]',s=e(".ui.dropdown"),i=e(".wm-menu"),d=".message .close";e.fn.api.settings.api={contact_list:"/api/v1/contact/",contact_search:"/api/v1/contact/?query={query}",contact_schema:"/api/v1/contact/schema/",contact_detail:"/api/v1/contact/{id}/",contact_call:"/contacts/{id}/call/",tag_list:"/api/v1/tag/",tag_schema:"/api/v1/tag/schema/",tag_detail:"/api/v1/tag/{id}/"},n.checkbox(),s.dropdown({}),i.modal("attach events",".grid.launch.item"),i.modal("attach events",".wm-menu .close","hide"),e(document).on("click",d,function(){e(this).closest(".message").transition("fade")}),e(document).on("click",o,function(){e(this).api({action:"contact_call",method:"POST",on:"now",urlData:{id:e(this).data("id")},beforeSend:function(t){return t.data.type=e(this).data("type"),t},beforeXHR:function(e){e.setRequestHeader("X-CSRFToken",t.getCookie("csrftoken"))},onSuccess:function(e,a,c){e.status&&t.createMessage(e.status,e.message)},onError:function(e,a,c){c.responseJSON.status&&t.createMessage(c.responseJSON.status,c.responseJSON.message)}})}),t.createMessage=function(t,a){var n=e('<div class="ui '+t+' message"><i class="close icon"></i></div>');n.append('<div class="header capitalize">'+t+"</div>"),n.append("<p>"+a+"</p>"),c.append(n)},t.getCookie=function(t){var e=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),c=0;c<a.length;c++){var n=jQuery.trim(a[c]);if(n.substring(0,t.length+1)==t+"="){e=decodeURIComponent(n.substring(t.length+1));break}}return e}}(window.workmate=window.workmate||{},jQuery);