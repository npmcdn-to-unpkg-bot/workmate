!function(t,e){var a=e(".wm-messages"),n='[data-action="contact_call"]',c=e(".dropdown"),o=e(".wm-menu"),s=".message .close";e.fn.api.settings.api={contact_list:"/api/v1/contact/",contact_search:"/api/v1/contact/?query={query}",contact_schema:"/api/v1/contact/schema/",contact_detail:"/api/v1/contact/{id}/",contact_call:"/contacts/{id}/call/",tag_list:"/api/v1/tag/",tag_schema:"/api/v1/tag/schema/",tag_detail:"/api/v1/tag/{id}/"},c.dropdown({}),o.modal("attach events",".grid.launch.item"),o.modal("attach events",".wm-menu .close","hide"),e(document).on("click",s,function(){e(this).closest(".message").transition("fade")}),e(document).on("click",n,function(){e(this).api({action:"contact_call",method:"POST",on:"now",urlData:{id:e(this).data("id")},beforeSend:function(t){return t.data.type=e(this).data("type"),t},beforeXHR:function(e){e.setRequestHeader("X-CSRFToken",t.getCookie("csrftoken"))},onSuccess:function(e){e.status&&t.createMessage(e.status,e.message)},onError:function(e,a,n){n.responseJSON.status&&t.createMessage(n.responseJSON.status,n.responseJSON.message)}})}),t.createMessage=function(t,n){var c=e('<div class="ui '+t+' message"><i class="close icon"></i></div>');c.append('<div class="header capitalize">'+t+"</div>"),c.append("<p>"+n+"</p>"),a.append(c)},t.getCookie=function(t){var e=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var c=jQuery.trim(a[n]);if(c.substring(0,t.length+1)==t+"="){e=decodeURIComponent(c.substring(t.length+1));break}}return e}}(window.workmate=window.workmate||{},jQuery);